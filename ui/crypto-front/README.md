# AI驱动数字货币投资辅助系统

## 项目简介
本项目是一个AI驱动的数字货币投资辅助系统，融合大数据采集、AI推理、前后端开发技术，构建可落地的投资辅助系统，掌握全栈项目开发流程与业务建模思维。

## 技术栈
- **前端**：React + Ant Design
- **后端**：Java Spring Boot
- **AI智能层**：Dify（接入大语言模型）
- **数据存储**：MySQL

## 系统架构
采用"AI智能层+后端服务层+前端展示层"的三层架构：

1. **AI智能层**：通过Dify实现消息情感分析、生成持仓建议
2. **后端服务层**：提供RESTful API，处理数据库CRUD、定时任务、审核逻辑
3. **前端展示层**：实现数据可视化、交互界面开发

## 核心功能模块

### 1. 消息采集模块
- 每日定时采集主流数字货币的利好、利空消息
- 支持按数字货币类型、利好/利空筛选
- 消息详情展示

### 2. 持仓数据管理模块
- 饼图展示当前资产占比
- 折线图展示近7日持仓变化
- 支持导出数据为Excel

### 3. AI分析模块
- 结合市场消息与当前持仓，分析资产配置合理性
- 生成持仓建议报告

### 4. 审核模块
- 展示完整建议报告
- 支持"通过"、"驳回"操作
- 记录审核人、审核时间、审核结果

## 后端API设计

### 1. 消息管理API

#### 获取消息列表
- **URL**：`/api/messages`
- **Method**：GET
- **参数**：
  - `cryptoType`：数字货币类型（可选）
  - `sentiment`：情感倾向（利好/利空/中性，可选）
  - `page`：页码（默认1）
  - `pageSize`：每页条数（默认10）
- **返回**：消息列表，包含消息ID、时间、数字货币类型、内容、情感倾向、来源

#### 获取消息详情
- **URL**：`/api/messages/{id}`
- **Method**：GET
- **参数**：
  - `id`：消息ID
- **返回**：消息详情，包含完整内容、链接等

### 2. 持仓数据API

#### 获取当前持仓
- **URL**：`/api/portfolio/current`
- **Method**：GET
- **返回**：当前持仓数据，包含资产类型、数量、占比、估值等

#### 获取历史持仓记录
- **URL**：`/api/portfolio/history`
- **Method**：GET
- **参数**：
  - `startDate`：开始日期（可选）
  - `endDate`：结束日期（可选）
  - `page`：页码（默认1）
  - `pageSize`：每页条数（默认10）
- **返回**：历史持仓记录列表

#### 更新持仓数据
- **URL**：`/api/portfolio/update`
- **Method**：POST
- **参数**：
  - `portfolioData`：持仓数据列表，包含资产类型、数量、更新时间等
- **返回**：更新结果

### 3. 建议报告API

#### 获取建议报告列表
- **URL**：`/api/reports`
- **Method**：GET
- **参数**：
  - `status`：报告状态（待审核/已通过/已驳回，可选）
  - `page`：页码（默认1）
  - `pageSize`：每页条数（默认10）
- **返回**：建议报告列表，包含报告ID、生成时间、状态、核心建议等

#### 获取建议报告详情
- **URL**：`/api/reports/{id}`
- **Method**：GET
- **参数**：
  - `id`：报告ID
- **返回**：建议报告详情，包含消息分析结果、持仓数据快照、调整方案等

#### 提交审核结果
- **URL**：`/api/reports/{id}/approve`
- **Method**：POST
- **参数**：
  - `status`：审核结果（通过/驳回）
  - `rejectReason`：驳回原因（可选）
  - `approver`：审核人
- **返回**：审核结果

### 4. 系统概览API

#### 获取核心指标
- **URL**：`/api/dashboard/metrics`
- **Method**：GET
- **返回**：核心指标数据，包含未读消息数、待审核报告数、当前总资产估值等

## Dify智能体集成方案

### 1. 第一次分析消息的Prompt设计
```
你是一位专业的数字货币市场分析师，请对以下消息进行情感分析：

消息内容：{messageContent}
数字货币类型：{cryptoType}

请分析该消息对{cryptoType}的影响方向（利好/利空/中性）和影响程度（高/中/低），并简要说明原因。

输出格式：
{
  "cryptoType": "{cryptoType}",
  "sentiment": "利好/利空/中性",
  "impactLevel": "高/中/低",
  "reason": "分析原因"
}
```

### 2. 第二次分析持仓的Prompt设计
```
你是一位专业的数字货币投资顾问，请结合以下信息分析当前持仓的合理性，并生成调整建议：

当前持仓：{currentPortfolio}

相关消息分析：{messageAnalysis}

请分析当前持仓与市场消息的匹配度，判断资产配置是否合理，并给出具体的调整建议（包括资产种类适配性、数量占比优化等维度）。

输出格式：
{
  "analysis": "持仓合理性分析",
  "suggestions": [
    {
      "cryptoType": "资产类型",
      "currentAmount": "当前数量",
      "suggestedAmount": "建议数量",
      "reason": "调整原因"
    }
  ],
  "totalValue": "当前总资产估值"
}
```

### 3. 智能体调用后端接口

#### 获取当前持仓
```javascript
fetch('http://localhost:8080/api/portfolio/current', {
  method: 'GET',
  headers: {
    'Content-Type': 'application/json'
  }
})
.then(response => response.json())
.then(data => {
  // 使用持仓数据进行分析
})
```

#### 提交建议报告
```javascript
fetch('http://localhost:8080/api/reports', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    messageAnalysis: messageAnalysis,
    portfolioSnapshot: currentPortfolio,
    suggestions: suggestions,
    totalValue: totalValue
  })
})
.then(response => response.json())
.then(data => {
  // 处理提交结果
})
```

## 前端页面设计

### 1. 系统概览页
- 核心指标卡片：未读消息数、待审核报告数、当前总资产估值
- 快速入口：消息列表、持仓数据、建议报告

### 2. 消息列表页
- 表格展示：时间、数字货币类型、内容摘要、情感倾向、来源
- 筛选功能：数字货币类型、情感倾向
- 查看详情：点击消息查看完整内容和链接

### 3. 持仓数据页
- 饼图：展示当前资产占比
- 折线图：展示近7日持仓变化
- 数据表格：展示详细持仓数据
- 导出功能：导出数据为Excel

### 4. 建议报告页
- 报告概览：生成时间、核心建议
- 消息分析：关联的原始消息和分析结果
- 持仓快照：生成报告时的持仓数据
- 调整建议：详细的调整方案
- 审核操作：通过/驳回按钮，驳回原因输入框

## 开发计划

### 第一周
- 项目搭建：前端React + Ant Design，后端Spring Boot
- 数据库设计：消息表、持仓表、报告表、审核记录表

### 第二周
- 后端API开发：消息管理、持仓数据API
- 前端页面开发：系统概览页、消息列表页

### 第三周
- 后端API开发：建议报告、审核API
- 前端页面开发：持仓数据页、建议报告页

### 第四周
- Dify智能体开发：消息采集、情感分析
- 前后端联调

### 第五周
- Dify智能体开发：持仓分析、建议生成
- 前后端联调

### 第六周
- 系统测试：功能测试、异常处理测试
- 性能优化

### 第七周
- 文档编写：项目总结报告、接口文档
- 演示视频录制

## 团队分工

### 后端开发A
- Spring Boot项目搭建
- 持仓数据管理API开发
- 数据库设计

### 后端开发B
- 消息采集模块（定时任务+API爬取）
- 审核逻辑开发
- 全局异常处理

### AI集成工程师
- Dify智能体开发
- Prompt设计与优化
- AI接口调用与结果处理

### 前端开发A
- React项目搭建
- 持仓数据页+系统概览页开发
- 图表组件实现

### 前端开发B
- 消息列表页+建议报告页开发
- 前后端接口联调
- 页面样式优化

### 项目经理
- 需求梳理
- 任务拆分与排期
- Git版本管理
- 测试验收
- 文档汇总

## 测试计划

### 功能测试
- 消息采集功能：验证定时任务执行、消息存储
- 持仓数据管理：验证数据展示、更新功能
- AI分析功能：验证消息分析、持仓建议生成
- 审核功能：验证审核流程、数据更新

### 异常处理测试
- Dify智能体采集失败处理
- 持仓查询接口调用失败处理
- AI分析结果模糊处理
- 审核驳回后重新触发AI分析处理

### 性能测试
- 消息列表加载性能
- 持仓数据可视化渲染性能
- AI分析响应时间

## 部署说明

### 后端部署
1. 编译Spring Boot项目：`mvn clean package`
2. 运行jar包：`java -jar crypto-backend.jar`
3. 配置环境变量：数据库连接、API密钥等

### 前端部署
1. 构建React项目：`npm run build`
2. 部署构建产物到Nginx或其他静态文件服务器
3. 配置反向代理指向后端API

### Dify智能体部署
1. 在Dify平台创建智能体
2. 配置Prompt模板
3. 配置后端API调用

## 注意事项

1. 确保系统安全性：API调用鉴权、数据加密存储
2. 关注系统性能：大数据量下的查询优化、前端渲染优化
3. 保证数据一致性：审核通过后及时更新持仓数据
4. 完善异常处理：各种边界情况的处理机制
5. 优化用户体验：响应式布局、友好的错误提示

## 文档资料

- 项目总结报告
- 数据库设计文档
- API接口文档
- Prompt设计文档
- 测试报告
- 演示视频

## 技术支持

如有技术问题，请联系项目团队成员。
